
module "enum_match";

import "io.vx" as io;

enum Color {
    Red,
    Green,
    Blue
};

func main() -> i32 {
    io.print("Testing enum matching..."); io.print("\n");

    var Color c = Red;
    var i32 val = 0;

    match c {
        Red => {
            val = 1;
        }
        Green => {
            val = 2;
        }
        Blue => {
            val = 3;
        }
    }

    if (val != 1) {
        io.print("FAIL: Red should match val=1"); io.print("\n");
        return 1;
    }

    c = Green;
    match c {
        Red => { val = 10; }
        _   => { val = 20; }
    }
    
    if (val != 20) {
        io.print("FAIL: Wildcard should match Green"); io.print("\n");
        return 1;
    }

    io.print("PASS: Enum match works"); io.print("\n");
    return 0;
}
